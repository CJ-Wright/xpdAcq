xpdAcq Change Log
-----------------

.. current developments

v0.7.2
====================

**Added:**

* Changelogs are now displayed in the docs homepage and 
  as their own page.
* xrun now can take a list of scans and run them in order
* Preliminary robot functionality, requiring location information


**Changed:**

* Moved to configuration file driven ``xpdacq_conf.py`` for greater flexability
* All doc ``rst`` files are passed through a jinja2 renderer
  before being built into docs. This will allow for greater 
  flexability while writing the docs.


**Deprecated:**

* ``run_mask_builder`` function and relevant metadata injections.
    Dynamic mask is generated by ``xpdAn`` per run and mask server-client
    relationship will be tracked in analysis pipeline.


**Fixed:**

* Error in the docs where sphinx was finding the templates.




v0.7.1
~~~~~~~~~~~~~~~~~~~~

**Added:**

* Requirements folder


**Changed:**

* Release template now uses proper version in license
* Travis now uses the requirements folder


**Deprecated:**

* Replace most ``shutil`` functionalities with native Unix commands
  called by ``subprocess`` to have a clear picture on the system response.


**Fixed:**

* Add ``--timeout`` option to rsync during ``_end_beamtime`` to allow
  temporally disconnect.

* Exclude hidden files from the ``_end_beamtime`` archival. Those files
  are mainly used as configurations by local applications and are less
  likely to be reusable even if user requests them.




v0.7.0
~~~~~~~~~~~~~~~~~~~~

**Added:**

None

* Filter positions are recorded in metadata on each xrun.
* Added verification step: Beamline scientists must verify longterm beamline config file at the start of a new beamtime.

* Automatically display current filter positions (``In`` or ``Out``) from for every ``xrun``.


**Changed:**

* Change the filepath structure in ``glbl`` to align with the update
  at XPD. All ``xf28id1`` -> ``xf28id2``, including hostname and
  nfs-mount drives.


**Deprecated:**

* Remove static mask injection. Mask is now handled by the analysis
  pipeline dynamically.


**Fixed:**

* Instruction in ``run_calibration``. There is a specific print statement
  to tell the user to finish the interactive calibration process in the
  analysis terminal.

* Fix ``_end_beamtime``. Details about the fixes are:

  * Use rsync while archiving ``xpdUser`` so that user can see
    the progress. (rsync lists files have been transferred)

  * More sophisticated logic when flushing xpdUser directory.
    Now the function will tell the user to close files used by
    the current process, instead of throwing an error and failing
    the process.

  * Some cleaning in the logic. Program will remove the remote
    archive if user doesn't confirm to flush the local directory
    so that we could potentially avoid having multiple copies at
    the remote location.


v0.6.0
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This is a stable release of ``xpdAcq`` software.

This version is fully documented and extensively tested.

New features introduced to this version:

* Integration with automated data reduction pipeline. Now live visualization and
  automated data-saving is supported. For the details about the pipeline, please
  refer to `xpdAn documentation <http://xpdacq.github.io/xpdAn/>`_.


* Advanced shutter control logic for temperature-ramping scan plan,
  ``Tlist`` and ``Tramp``. By default, shutter will remain closed in
  between exposures, which prevent detector from burning. This behavior can
  be overridden, leaving the fast shutter open for the entire scan.
  Please refer to the function docstring by typing ``Tlist?`` or
  ``Tramp?`` in the ``collection`` terminal for more details.


* Refined metadata logic. We implement ``client-server`` logic which
  would largely enhance the linking between associated scans. For
  more details, please refer to :ref:`client_server_md`.


* Now programs takes in user defined folder tag so that it's easier to
  separate data into subfolders with memorable names. Please refer to
  :ref:`folder_tag`.


* Current version supports following built-in scans:

  .. code-block:: none

    single-frame (ct)
    time-series (tseries)
    temperature-series scans (Tramp)
    temperature-list scans (Tlist)


  Additional built-in scan types will be added in future releases.


v0.5.2
~~~~~~~~~~

This is a stable release of ``xpdAcq`` software.

Addition to all the features of ``v0.5.0``, new features introduced to this version are:

  * functionality to reload beamtime configuration when reenter into ``ipython`` session

  * improved logic of importing metadata from a spreadsheet, information is parsed in a
    way that facilitates data driven studies.

  * new ScanPlan: temperature list scan ``Tlist``. User can collect data at desired
    temperature points.

``v0.5.2`` supports following built-in scans:

.. code-block:: none

  single-frame (ct)
  time-series (tseries)
  temperature-series scans (Tramp)
  temperature-list scans (Tlist)

Additional built-in scan types will be added in future releases.

``v0.5.2`` also supports following automated logics :

  * :ref:`automated dark subtraction <auto_dark>`

  * :ref:`automated calibration capture <auto_calib>`

  * :ref:`automated mask per image <auto_mask>`

This version is fully documented and extensively tested.


v0.5.0
~~~~~~~~~~

This is a stable release of ``xpdAcq`` software.

New features introduced to this version:

  * flexibility of running customized ``bluesky`` plans while keeping ``xpdAcq`` dark collection logic.

  * ability of importing metadata from a spreadsheet, open the door for data driven studies.

  * data reduction tools:

    * azimuthal integration using ``pyFAI`` as the back-end
    * auto-masking based on statistics on pixel counts

``v0.5.0`` supports three kinds of built-in scans:

.. code-block:: none

  single-frame (ct)
  time-series (tseries)
  temperature-series scans (Tramp)

Additional built-in scan types will be added in future releases.

``v0.5.0`` supports following automated logics :

  * :ref:`automated dark subtraction <auto_dark>`

  * :ref:`automated calibration capture <auto_calib>`

  * :ref:`automated mask per image <auto_mask>`

This version is fully documented and extensively tested.

v0.3.0
~~~~~~~~~~

This is the first full, stable, release, of xpdAcq software.
It offers functionality to acquire data at XPD but with very limited
tools yet to analyze it.
Future releases will focus more on analysis functionalities.
``v0.3.0`` is still a limited functionality release in that it only supports three kinds of scans:

.. code-block:: none

  single-frame (ct)
  time-series (tseries)
  temperature-series scans (Tramp)

Additional scan types will be added in future releases.

However, it does support:
 * automated dark subtraction
 * automated calibration capture.

This version is fully documented and extensively tested.



